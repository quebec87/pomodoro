let timerInt;const timerStateArr=["notask","working","break","done"];var timerState=timerStateArr[0];const workingDuration=.2,breakDuration=.1,workingDurationSec=60*workingDuration,breakDurationSec=60*breakDuration;let isPlaying=!1;const display=$(".time-display"),dialog=$(".dialog-info p"),iconDotHtml='<li class="icon-orange-dot"></li>';let taskArr,currentTask,currentTomato,totalTomato;function menuItemClicked(){$(".menuitem").click(function(){$(this).siblings().removeClass("active"),$(this).addClass("active"),openMenuPanel()})}function addTaskClicked(){$(".menuitem").eq(0).click()}function openMenuPanel(){$(".menupanel").hasClass("open")?showPanContent():($(".menupanel").addClass("open"),$(".main").addClass("menuopen"),showPanContent())}function showPanContent(){const t=$(".menuitem.active").index();$(".menupan-content").siblings().removeClass("show"),$(".menupan-content").eq(t).addClass("show")}function closeMenuPanel(){$(".menupanel").removeClass("open"),$(".main").removeClass("menuopen")}function setTomatoCount(){$("#Estimated-Tomato").change(function(){const t=$(".tomato-count>div");switch(t.removeClass(),$(this).val()){case"1":t.addClass("icon-orange-dot");break;case"2":t.addClass("icon-orange-dot-two");break;case"3":t.addClass("icon-orange-dot-three");break;case"4":t.addClass("icon-orange-dot-four");break;case"5":t.addClass("icon-orange-dot-five")}})}function addtaskSubmitted(t){t.preventDefault(),storeTask(!0),clearForm(),closeMenuPanel(),timerState=timerStateArr[1],setClockState()}function storeTask(t){var e=$("#Task-Name").val(),a=$("#Task-Date").val(),r=$("#Estimated-Tomato").val(),o=!1;let s={name:e=e,date:a=a,tomato:r=r,done:o=o};t&&(taskArr.push(s),currentTask=taskArr[taskArr.length-1],totalTomato=currentTask.tomato,currentTomato=1,setupTotalTomato(currentTask.tomato))}function clearForm(){$("#Task-Name").val("My Task"),$("#Task-Date").val(""),$("#Estimated-Tomato").val("1"),$(".tomato-count div").removeClass(),$(".tomato-count div").addClass("icon-orange-dot")}function setClockState(){switch(timerState){case timerStateArr[0]:$(".add-task-start").css("display","block"),$(".current-task").css("display","none"),$(".timer").removeClass("break"),$(".timer").addClass("notask"),display.html("Hello!<br>+");break;case timerStateArr[1]:$(".timer").removeClass("break"),$(".timer").removeClass("notask"),$(".timer").removeClass("done"),$(".add-task-start").css("display","none"),$(".current-task h2").html(currentTask.name),$(".current-task").css("display","block"),display.text(`${workingDuration}:00`);break;case timerStateArr[2]:$(".timer").addClass("break"),$(".timer").removeClass("notask"),$(".timer").removeClass("done"),display.text(`${breakDuration}:00`);break;case timerStateArr[3]:$(".timer").removeClass("break"),$(".timer").addClass("done"),display.text("")}}function setupTotalTomato(t){$(".current-task .total-tomato").empty();for(var e=0;e<t;e++)$(".current-task .total-tomato").append(iconDotHtml)}function playPauseClicked(){$(".btn-play-pause").hasClass("playing")?(isPlaying=!1,$(".btn-play-pause").removeClass("playing"),$(".outer-circle>circle").css("animation-play-state","paused")):($(".btn-play-pause").addClass("playing"),isPlaying=!0,null==timerInt&&(timerState==timerStateArr[1]?(startTimer(workingDurationSec,display),$(".outer-circle>circle").css("animation-duration",`${workingDurationSec}s`)):timerState==timerStateArr[2]&&(startTimer(breakDurationSec,display),$(".outer-circle>circle").css("animation-duration",`${breakDurationSec}s`))),$(".outer-circle").addClass("start"),$(".outer-circle>circle").css("animation-play-state","running"))}function resetClicked(){null!=timerInt&&(window.clearInterval(timerInt),timerInt=void 0,isPlaying=!1,$(".btn-play-pause").removeClass("playing"),$(".outer-circle>circle").css("animation-play-state","paused"),$(".outer-circle").removeClass("start"),timerState==timerStateArr[1]?display.text(`${workingDuration}:00`):timerState==timerStateArr[2]&&display.text(`${breakDuration}:00`))}function startTimer(t,e){let a,r,o=t;timerInt=window.setInterval(()=>{if(1==isPlaying&&(a=parseInt(o/60,10),r=parseInt(o%60,10),a=a<10?`0${a}`:a,r=r<10?`0${r}`:r,e.text(`${a}:${r}`),--o<0))if(o=0,resetClicked(),timerState==timerStateArr[1])timerState=timerStateArr[2],setClockState();else if(timerState==timerStateArr[2]){var t=currentTomato-1;if($(".total-tomato li").eq(t).addClass("done"),currentTomato==totalTomato)return timerState=timerStateArr[3],showDialog(),void setClockState();currentTomato++,timerState=timerStateArr[1],showDialog(),setClockState()}},1e3)}function showDialog(){switch(timerState){case timerStateArr[1]:dialog.html("Go for next tomato");break;case timerStateArr[3]:dialog.html("Good Job. Task is done.")}$(".dialog-info").addClass("show")}$(document).ready(()=>{taskArr=[],menuItemClicked(),$("#Task-Date").datepicker(),$("#Task-List-Date").datepicker(),$("#Analytics-Date").datepicker(),setTomatoCount(),$("#Add-Task-Btn").on("click",addtaskSubmitted),$("main").on("click",function(t){t.target===this&&closeMenuPanel()}),$(".add-task-start").on("click",addTaskClicked),$(".notask .time-display").on("click",addTaskClicked),$(".btn-play-pause").on("click",playPauseClicked),$(".btn-reset").on("click",resetClicked),$(".btn-ok").on("click",function(){$(".dialog-info").removeClass("show")})});